function Validator(e){return this.validate_on_killfocus=!1,this.formobj=document.forms[e],this.formobj?(this.formobj.onsubmit?(this.formobj.old_onsubmit=this.formobj.onsubmit,this.formobj.onsubmit=null):this.formobj.old_onsubmit=null,this.formobj._sfm_form_name=e,this.formobj.onsubmit=form_submit_handler,this.addValidation=add_validation,this.formobj.addnlvalidations=new Array,this.addAddnlValidationFunction=add_addnl_vfunction,this.formobj.runAddnlValidations=run_addnl_validations,this.setAddnlValidationFunction=set_addnl_vfunction,this.clearAllValidations=clear_all_validations,this.focus_disable_validations=!1,document.error_disp_handler=new sfm_ErrorDisplayHandler,this.EnableOnPageErrorDisplay=validator_enable_OPED,this.EnableOnPageErrorDisplaySingleBox=validator_enable_OPED_SB,this.show_errors_together=!1,this.EnableMsgsTogether=sfm_enable_show_msgs_together,document.set_focus_onerror=!0,this.EnableFocusOnError=sfm_validator_enable_focus,this.formobj.error_display_loc="right",this.SetMessageDisplayPos=sfm_validator_message_disp_pos,this.formobj.DisableValidations=sfm_disable_validations,void(this.formobj.validatorobj=this)):void alert("Error: couldnot get Form object "+e)}function sfm_validator_enable_focus(e){document.set_focus_onerror=e}function add_addnl_vfunction(){var e={};e.func=arguments[0],e.arguments=[];for(var r=1;r<arguments.length;r++)e.arguments.push(arguments[r]);this.formobj.addnlvalidations.push(e)}function set_addnl_vfunction(e){return e.constructor==String?void alert("Pass the function name like this: validator.setAddnlValidationFunction(DoCustomValidation)\n rather than passing the function name as string"):void this.addAddnlValidationFunction(e)}function run_addnl_validations(){for(var e=!0,r=0;r<this.addnlvalidations.length;r++){var t=this.addnlvalidations[r],a=t.arguments||[];t.func.apply(null,a)||(e=!1)}return e}function sfm_set_focus(e){document.set_focus_onerror&&(e.disabled||"hidden"==e.type||e.focus())}function sfm_disable_validations(){this.old_onsubmit?this.onsubmit=this.old_onsubmit:this.onsubmit=null}function sfm_enable_show_msgs_together(){this.show_errors_together=!0,this.formobj.show_errors_together=!0}function sfm_validator_message_disp_pos(e){this.formobj.error_display_loc=e}function clear_all_validations(){for(var e=0;e<this.formobj.elements.length;e++)this.formobj.elements[e].validationset=null}function form_submit_handler(){var e=!0;document.error_disp_handler.clear_msgs();for(var r=0;r<this.elements.length&&(this.elements[r].validationset&&!this.elements[r].validationset.validate()&&(e=!1),e||this.show_errors_together);r++);return(this.show_errors_together||e&&!this.show_errors_together)&&(this.runAddnlValidations()||(e=!1)),e?!0:(document.error_disp_handler.FinalShowMsg(),!1)}function add_validation(e,r,t){var a=null;if(arguments.length>3&&(a=arguments[3]),!this.formobj)return void alert("Error: The form object is not set properly");var s=this.formobj[e];return s.length&&isNaN(s.selectedIndex)&&(s=s[0]),s?(1==this.validate_on_killfocus&&(s.onblur=handle_item_on_killfocus),s.validationset||(s.validationset=new ValidationSet(s,this.show_errors_together)),s.validationset.add(r,t,a),void(s.validatorobj=this)):void alert("Error: Couldnot get the input object named: "+e)}function handle_item_on_killfocus(){return 1==this.validatorobj.focus_disable_validations?(this.validatorobj.focus_disable_validations=!1,!1):null!=this.validationset&&(document.error_disp_handler.clear_msgs(),0==this.validationset.validate())?(document.error_disp_handler.FinalShowMsg(),!1):void 0}function validator_enable_OPED(){document.error_disp_handler.EnableOnPageDisplay(!1)}function validator_enable_OPED_SB(){document.error_disp_handler.EnableOnPageDisplay(!0)}function sfm_ErrorDisplayHandler(){this.msgdisplay=new AlertMsgDisplayer,this.EnableOnPageDisplay=edh_EnableOnPageDisplay,this.ShowMsg=edh_ShowMsg,this.FinalShowMsg=edh_FinalShowMsg,this.all_msgs=new Array,this.clear_msgs=edh_clear_msgs}function edh_clear_msgs(){this.msgdisplay.clearmsg(this.all_msgs),this.all_msgs=new Array}function edh_FinalShowMsg(){0!=this.all_msgs.length&&this.msgdisplay.showmsg(this.all_msgs)}function edh_EnableOnPageDisplay(e){1==e?this.msgdisplay=new SingleBoxErrorDisplay:this.msgdisplay=new DivMsgDisplayer}function edh_ShowMsg(e,r){var t=new Array;t.input_element=r,t.msg=e,this.all_msgs.push(t)}function AlertMsgDisplayer(){this.showmsg=alert_showmsg,this.clearmsg=alert_clearmsg}function alert_clearmsg(e){}function alert_showmsg(e){for(var r="",t=null,a=0;a<e.length;a++)null==t&&(t=e[a].input_element),r+=e[a].msg+"\n";alert(r),null!=t&&sfm_set_focus(t)}function sfm_show_error_msg(e,r){document.error_disp_handler.ShowMsg(e,r)}function SingleBoxErrorDisplay(){this.showmsg=sb_div_showmsg,this.clearmsg=sb_div_clearmsg}function sb_div_clearmsg(e){var r=form_error_div_name(e);sfm_show_div_msg(r,"")}function sb_div_showmsg(e){for(var r="<ul>\n",t=0;t<e.length;t++)r+="<li>"+e[t].msg+"</li>\n";r+="</ul>";var a=form_error_div_name(e),s=a+"_loc";r="<a name='"+s+"' >"+r,sfm_show_div_msg(a,r),window.location.hash=s}function form_error_div_name(e){var r=null;for(var t in e)if(r=e[t].input_element)break;var a="";return r&&(a=r.form._sfm_form_name+"_errorloc"),a}function sfm_show_div_msg(e,r){if(e.length<=0)return!1;if(document.layers){if(divlayer=document.layers[e],!divlayer)return;divlayer.document.open(),divlayer.document.write(r),divlayer.document.close()}else if(document.all){if(divlayer=document.all[e],!divlayer)return;divlayer.innerHTML=r}else if(document.getElementById){if(divlayer=document.getElementById(e),!divlayer)return;divlayer.innerHTML=r}return divlayer.style.visibility="visible",!1}function DivMsgDisplayer(){this.showmsg=div_showmsg,this.clearmsg=div_clearmsg}function div_clearmsg(e){for(var r in e){var t=element_div_name(e[r].input_element);show_div_msg(t,"")}}function element_div_name(e){var r=e.form._sfm_form_name+"_"+e.name+"_errorloc";return r=r.replace(/[\[\]]/gi,"")}function div_showmsg(e){var r=null;for(var t in e){null==r&&(r=e[t].input_element);var a=element_div_name(e[t].input_element);show_div_msg(a,e[t].msg)}null!=r&&sfm_set_focus(r)}function show_div_msg(e,r){if(e.length<=0)return!1;if(document.layers){if(divlayer=document.layers[e],!divlayer)return;divlayer.document.open(),divlayer.document.write(r),divlayer.document.close()}else if(document.all){if(divlayer=document.all[e],!divlayer)return;divlayer.innerHTML=r}else if(document.getElementById){if(divlayer=document.getElementById(e),!divlayer)return;divlayer.innerHTML=r}divlayer.style.visibility="visible"}function ValidationDesc(e,r,t,a){this.desc=r,this.error=t,this.itemobj=e,this.condition=a,this.validate=vdesc_validate}function vdesc_validate(){return null==this.condition||eval(this.condition)?validateInput(this.desc,this.itemobj,this.error)?!0:(this.itemobj.validatorobj.focus_disable_validations=!0,sfm_set_focus(this.itemobj),!1):!0}function ValidationSet(e,r){this.vSet=new Array,this.add=add_validationdesc,this.validate=vset_validate,this.itemobj=e,this.msgs_together=r}function add_validationdesc(e,r,t){this.vSet[this.vSet.length]=new ValidationDesc(this.itemobj,e,r,t)}function vset_validate(){for(var e=!0,r=0;r<this.vSet.length&&(e=e&&this.vSet[r].validate(),e||this.msgs_together);r++);return e}function validateEmail(e){var r=e.match("^(.+)@(.+)$");if(null==r)return!1;if(null!=r[1]){var t=/^\"?[\w-_\.]*\"?$/;if(null==r[1].match(t))return!1}if(null!=r[2]){var a=/^[\w-\.]*\.[A-Za-z]{2,4}$/;if(null==r[2].match(a)){var s=/^\[\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}\]$/;if(null==r[2].match(s))return!1}return!0}return!1}function TestComparison(objValue,strCompareElement,strvalidator,strError){var bRet=!0,objCompare=null;if(!objValue.form)return sfm_show_error_msg("Error: No Form object!",objValue),!1;if(objCompare=objValue.form.elements[strCompareElement],!objCompare)return sfm_show_error_msg("Error: Element with name"+strCompareElement+" not found !",objValue),!1;var objval_value=objValue.value,objcomp_value=objCompare.value;if("eqelmnt"!=strvalidator&&"neelmnt"!=strvalidator){if(objval_value=objval_value.replace(/\,/g,""),objcomp_value=objcomp_value.replace(/\,/g,""),isNaN(objval_value))return sfm_show_error_msg(objValue.name+": Should be a number ",objValue),!1;if(isNaN(objcomp_value))return sfm_show_error_msg(objCompare.name+": Should be a number ",objCompare),!1}var cmpstr="";switch(strvalidator){case"eqelmnt":objval_value!=objcomp_value&&(cmpstr=" should be equal to ",bRet=!1);break;case"ltelmnt":eval(objval_value)>=eval(objcomp_value)&&(cmpstr=" should be less than ",bRet=!1);break;case"leelmnt":eval(objval_value)>eval(objcomp_value)&&(cmpstr=" should be less than or equal to",bRet=!1);break;case"gtelmnt":eval(objval_value)<=eval(objcomp_value)&&(cmpstr=" should be greater than",bRet=!1);break;case"geelmnt":eval(objval_value)<eval(objcomp_value)&&(cmpstr=" should be greater than or equal to",bRet=!1);break;case"neelmnt":objval_value.length>0&&objcomp_value.length>0&&objval_value==objcomp_value&&(cmpstr=" should be different from ",bRet=!1)}return 0==bRet&&(strError&&0!=strError.length||(strError=objValue.name+cmpstr+objCompare.name),sfm_show_error_msg(strError,objValue)),bRet}function TestSelMin(objValue,strMinSel,strError){var bret=!0,objcheck=objValue.form.elements[objValue.name],chkcount=0;if(objcheck.length)for(var c=0;c<objcheck.length;c++)"1"==objcheck[c].checked&&chkcount++;else chkcount="1"==objcheck.checked?1:0;var minsel=eval(strMinSel);return minsel>chkcount&&(strError&&0!=strError.length||(strError="Please Select atleast"+minsel+" check boxes for"+objValue.name),sfm_show_error_msg(strError,objValue),bret=!1),bret}function TestSelMax(objValue,strMaxSel,strError){var bret=!0,objcheck=objValue.form.elements[objValue.name],chkcount=0;if(objcheck.length)for(var c=0;c<objcheck.length;c++)"1"==objcheck[c].checked&&chkcount++;else chkcount="1"==objcheck.checked?1:0;var maxsel=eval(strMaxSel);return chkcount>maxsel&&(strError&&0!=strError.length||(strError="Please Select atmost "+maxsel+" check boxes for"+objValue.name),sfm_show_error_msg(strError,objValue),bret=!1),bret}function IsCheckSelected(e,r){var t=!1,a=e.form.elements[e.name];if(a.length){for(var s=-1,n=0;n<a.length;n++)if(a[n].value==r){s=n;break}s>=0&&"1"==a[s].checked&&(t=!0)}else"1"==e.checked&&(t=!0);return t}function TestDontSelectChk(e,r,t){var a=!0;return a=IsCheckSelected(e,r)?!1:!0,0==a&&(t&&0!=t.length||(t="Can't Proceed as you selected "+e.name),sfm_show_error_msg(t,e)),a}function TestShouldSelectChk(e,r,t){var a=!0;return a=IsCheckSelected(e,r)?!0:!1,0==a&&(t&&0!=t.length||(t="You should select"+e.name),sfm_show_error_msg(t,e)),a}function TestRequiredInput(e,r){var t=!0;return VWZ_IsEmpty(e.value)?t=!1:e.getcal&&!e.getcal()&&(t=!1),t||(r&&0!=r.length||(r=e.name+" : Required Field"),sfm_show_error_msg(r,e)),t}function TestFileExtension(e,r,t){var a=!1,s=!1;if(e.value.length<=0)return!0;for(var n=r.split(";"),o=0;o<n.length;o++)if(ext=e.value.substr(e.value.length-n[o].length,n[o].length),ext=ext.toLowerCase(),ext==n[o]){s=!0;break}return s?a=!0:(t&&0!=t.length||(t=e.name+" allowed file extensions are: "+r),sfm_show_error_msg(t,e),a=!1),a}function TestMaxLen(objValue,strMaxLen,strError){var ret=!0;return eval(objValue.value.length)>eval(strMaxLen)&&(strError&&0!=strError.length||(strError=objValue.name+" : "+strMaxLen+" characters maximum "),sfm_show_error_msg(strError,objValue),ret=!1),ret}function TestMinLen(objValue,strMinLen,strError){var ret=!0;return eval(objValue.value.length)<eval(strMinLen)&&(strError&&0!=strError.length||(strError=objValue.name+" : "+strMinLen+" characters minimum  "),sfm_show_error_msg(strError,objValue),ret=!1),ret}function TestInputType(e,r,t,a){var s=!0,n=e.value.search(r);return e.value.length>0&&n>=0&&(t&&0!=t.length||(t=a),sfm_show_error_msg(t,e),s=!1),s}function TestEmail(e,r){var t=!0;return e.value.length>0&&!validateEmail(e.value)&&(r&&0!=r.length||(r=e.name+": Enter a valid Email address "),sfm_show_error_msg(r,e),t=!1),t}function TestLessThan(objValue,strLessThan,strError){var ret=!0,obj_value=objValue.value.replace(/\,/g,"");return strLessThan=strLessThan.replace(/\,/g,""),isNaN(obj_value)?(sfm_show_error_msg(objValue.name+": Should be a number ",objValue),ret=!1):eval(obj_value)>=eval(strLessThan)&&(strError&&0!=strError.length||(strError=objValue.name+" : value should be less than "+strLessThan),sfm_show_error_msg(strError,objValue),ret=!1),ret}function TestGreaterThan(objValue,strGreaterThan,strError){var ret=!0,obj_value=objValue.value.replace(/\,/g,"");return strGreaterThan=strGreaterThan.replace(/\,/g,""),isNaN(obj_value)?(sfm_show_error_msg(objValue.name+": Should be a number ",objValue),ret=!1):eval(obj_value)<=eval(strGreaterThan)&&(strError&&0!=strError.length||(strError=objValue.name+" : value should be greater than "+strGreaterThan),sfm_show_error_msg(strError,objValue),ret=!1),ret}function TestRegExp(e,r,t){var a=!0;return e.value.length>0&&!e.value.match(r)&&(t&&0!=t.length||(t=e.name+": Invalid characters found "),sfm_show_error_msg(t,e),a=!1),a}function TestDontSelect(e,r,t){var a=!0;return null==e.value?(sfm_show_error_msg("Error: dontselect command for non-select Item",e),a=!1):e.value==r&&(t&&0!=t.length||(t=e.name+": Please Select one option "),sfm_show_error_msg(t,e),a=!1),a}function TestSelectOneRadio(e,r){for(var t=e.form.elements[e.name],a=!1,s=0;s<t.length;s++)if("1"==t[s].checked){a=!0;break}return 0==a&&(r&&0!=r.length||(r="Please select one option from "+e.name),sfm_show_error_msg(r,e)),a}function TestSelectRadio(e,r,t,a){for(var s=e.form.elements[e.name],n=!1,o=0;o<s.length;o++)if(s[o].value==r&&"1"==s[o].checked){n=!0;break}return 1==a&&0==n||0==a&&1==n?(sfm_show_error_msg(t,e),!1):!0}function validateInput(e,r,t){var a=!0,s=e.search("="),n="",o="";switch(s>=0?(n=e.substring(0,s),o=e.substr(s+1)):n=e,n){case"req":case"required":a=TestRequiredInput(r,t);break;case"maxlength":case"maxlen":a=TestMaxLen(r,o,t);break;case"minlength":case"minlen":a=TestMinLen(r,o,t);break;case"alnum":case"alphanumeric":a=TestInputType(r,"[^A-Za-z0-9]",t,r.name+": Only alpha-numeric characters allowed ");break;case"alnum_s":case"alphanumeric_space":a=TestInputType(r,"[^A-Za-z0-9\\s]",t,r.name+": Only alpha-numeric characters and space allowed ");break;case"num":case"numeric":case"dec":case"decimal":r.value.length>0&&!r.value.match(/^[\-\+]?[\d\,]*\.?[\d]*$/)&&(sfm_show_error_msg(t,r),a=!1);break;case"alphabetic":case"alpha":a=TestInputType(r,"[^A-Za-z]",t,r.name+": Only alphabetic characters allowed ");break;case"alphabetic_space":case"alpha_s":a=TestInputType(r,"[^A-Za-z\\s]",t,r.name+": Only alphabetic characters and space allowed ");break;case"email":a=TestEmail(r,t);break;case"lt":case"lessthan":a=TestLessThan(r,o,t);break;case"gt":case"greaterthan":a=TestGreaterThan(r,o,t);break;case"regexp":a=TestRegExp(r,o,t);break;case"dontselect":a=TestDontSelect(r,o,t);break;case"dontselectchk":a=TestDontSelectChk(r,o,t);break;case"shouldselchk":a=TestShouldSelectChk(r,o,t);break;case"selmin":a=TestSelMin(r,o,t);break;case"selmax":a=TestSelMax(r,o,t);break;case"selone_radio":case"selone":a=TestSelectOneRadio(r,t);break;case"dontselectradio":a=TestSelectRadio(r,o,t,!1);break;case"selectradio":a=TestSelectRadio(r,o,t,!0);break;case"eqelmnt":case"ltelmnt":case"leelmnt":case"gtelmnt":case"geelmnt":case"neelmnt":return TestComparison(r,o,n,t);case"req_file":a=TestRequiredInput(r,t);break;case"file_extn":a=TestFileExtension(r,o,t)}return a}function VWZ_IsListItemSelected(e,r){for(var t=0;t<e.options.length;t++)if(1==e.options[t].selected&&e.options[t].value==r)return!0;return!1}function VWZ_IsChecked(e,r){if(e.length){for(var t=0;t<e.length;t++)if("1"==e[t].checked&&e[t].value==r)return!0}else if("1"==e.checked)return!0;return!1}function sfm_str_trim(e){return e.replace(/^\s\s*/,"").replace(/\s\s*$/,"")}function VWZ_IsEmpty(e){return e=sfm_str_trim(e),0==e.length?!0:!1}